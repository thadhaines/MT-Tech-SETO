%==========================================================================
\section{Line Monitoring Functionality (lmon)}  
Previous versions of PST had line monitoring functionality, but the calculation was performed after the simulation was completed.
\mbox{PST 4} now calculates line current and power flow of monitored lines during non-linear simulation.
The updated line monitoring routine allows for controls dealing with line flow monitoring (such as AGC).
The definition of the \verb|lmon_con| is the same as previous PST versions and an example is shown in Listing \ref{lst: lmon example}.

\begin{lstlisting}[caption={Line Monitoring Definition Example},label={lst: lmon example}]
\end{lstlisting}\vspace{-2 em}
\begin{minted}[
		frame=lines,
		framesep=2mm,
		baselinestretch=1.2,
		bgcolor=gray!13,
		fontsize=\footnotesize,
		%linenos,
		breaklines
		]{MATLAB}
%% Line Monitoring
% Each value corresponds to an array index in the line array.
% Complex current and power flow on the line will be calculated and logged during simulation

lmon_con = [3,10]; 
\end{minted}
\noindent Calculated values are stored in the respective \verb|g.lmon.line| structure.
For example, if the above \verb|lmon_con| was used, \verb|g.lmon.line(2).iFrom(k)| would return the complex current injection at the from bus at data index \verb|k| of the line defined in the line array at index 10.
