% file to contain information on examples
%==============================================================================
\chapter{Examples - WIP}
Examples are located in the \verb|0-examples| folder and are designed to be run in batch mode.
This means that each example copies any required system, model, or modulation file to the main PST directory before running.
Typically, each example folder contains a \verb|.m| file that starts with \verb|run_| that can be used to run the example.
As example cases are located on a github repository, relative file paths are used so that examples can be run without much difficulty from various different machines.
While most examples can be run in multiple versions of PST, some functionality can only be found in specific versions.


\section{Example Operation Overview - WIP}

\noindent The general structure of created examples tend to reflect the following:
\begin{enumerate}
\itemsep 0em
\item Clear all variables, close all figures, and clear the command window.
\item Define which version of PST to use.
\item Create a relative path to the root directory of chosen PST version.
\item Copy any system, model, or modulation file to the PST root directory.
\item Set live plotting flag.
\item Run \verb|s_simu|.
\item Save output data.
\item Restore any model, or modulation file to original state.
\item Create data plots.
\end{enumerate}

A high level flow chart of the \verb|s_simu| script is presented in Appendix \ref{sec: simu BD}.
It should be noted that in \verb|s_simu|, an optional \verb|g.sys.DEBUG| flag may be set to 1 to display more output to the console.
%=================================================================
\input{examples/hiskens/hiskens}


%=====================================================================
\section{Modulation Examples} \label{sec: modExamples}
PST provides numerous ways to input a defined modulation signal into a variety of models.
The following list of example folder names work in all versions of PST and typically create linear/non-linear comparison plots.
While the examples themselves do not reflect any particular scenario, the provided code may be useful to create a particular scenario.

\begin{itemize}
\item \verb|lmod| - Replaces the \verb|ml_sig| file to modulate real load power.
\item \verb|mexc| - Replaces the \verb|mexc_sig| file to modulate the exciter reference signal.
\item \verb|mtg_sig| - Replaces the \verb|mtg_sig| file to modulate the governor $P_{ref}$ reference signal.
\item \verb|pm_sig| - Replaces the \verb|mpm_sig| file to modulate a machines mechanical power.
\item \verb|rlmod| - Replaces the \verb|rml_sig| file to modulate a load's reactive power.
\item \verb|SVC| - Replaces the \verb|msvc_sig| file to modulate an SVC's output value.
\item \verb|TCSC| - Replaces the \verb|mtcsc_sig| file to modulate an TCSC's output value.
\end{itemize}

\noindent It should be noted that modulation files for PST 2 and 3 assume input to function is ($t, k$), i.e. full time vector and data index, while PST 4 only requires the data index $k$.


%=====================================================================
\pagebreak
\section{AGC - WIP}
PST 4 only

\subsection{run\_AGC - WIP}
\begin{itemize}
\itemsep 0 em
\item 2 area Kundur-esq system with selectable integration methods via a string entered as \verb|FTS| in example file.
\item 0.5 PU load step on Bus 4. 
\item 120 second recovery with unrealistic AGC settings.
\end{itemize}

\begin{figure}[H]
	\centering
	\footnotesize
	\includegraphics[width=\linewidth]{examples/agc/sysOneLineAreas}
	\caption{One-Line used in run\_AGC.}
	\label{fig: runAGC one line}
\end{figure}%\vspace{-1 em}

\begin{figure}[H]
	\centering
	\footnotesize
	\includegraphics[width=\linewidth]{examples/agc/run-AGC-1}
	\caption{Live Plot output from run\_AGC.}
	\label{fig: runAGC liveplot}
\end{figure}%\vspace{-1 em}

\begin{figure}[H]
	\centering
	\footnotesize
	\includegraphics[width=\linewidth]{examples/agc/run-AGC-2}
	\caption{Governor signlas sent in run\_AGC.}
	\label{fig: runAGC tg}
\end{figure}%\vspace{-1 em}

\begin{figure}[H]
	\centering
	\footnotesize
	\includegraphics[width=\linewidth]{examples/agc/run-AGC-3}
	\caption{Change in area generation in run\_AGC.}
	\label{fig: runAGC area gen}
\end{figure}%\vspace{-1 em}


\begin{figure}[H]
	\centering
	\footnotesize
	\includegraphics[width=\linewidth]{examples/agc/run-AGC-4}
	\caption{Power absorbed by loads during run\_AGC.}
	\label{fig: runAGC power}
\end{figure}%\vspace{-1 em}

\begin{figure}[H]
	\centering
	\footnotesize
	\includegraphics[width=\linewidth]{examples/agc/run-AGC-5}
	\caption{Load bus voltage during run\_AGC.}
	\label{fig: runAGC bus v}
\end{figure}%\vspace{-1 em}



%-----------------------------------------------------------------------
% split into seperate doc due to pre existing results
\input{examples/agcMod/agcMod}

%=======================================================================

\input{examples/extendedTerm/extendedTerm}


%=======================================================================
\pagebreak
\section{ivmmod - WIP} \label{sec: ivmmod ex}
example modified from Dan - includes a VTS example  -
requires some minor reworking - 

shows how angle change `moves' entire system.

VTS method used - clearly shows how variable time steps adjust to capture dynamics


%=======================================================================
\pagebreak
\section{miniWECC - WIP}

\subsection{miniWECC-genTrip - WIP} 
Shows multi generator tripping, use of miniWECC in all versions

\subsection{miniWECC-AGC - WIP} 
multi area agc using optional VTS in PSTv4




%=======================================================================
\pagebreak
\section{pwrmod -WIP} \label{sec: pwrmodExamples}
\subsection{P-injection - WIP}
\subsection{I-injection - WIP}

%=======================================================================
\pagebreak
\input{examples/untrip/untrip}

%=====================================================================
% Working examples that are not really worth describing in great detail
\pagebreak
\section{Lightly Introduced Examples - WIP}
These examples exist on github, but don't necessarily require a much more than a casual mention.
\subsection{DC - WIP}
All versions - 

non-linear simulation seems to work

linear analysis doesn't seem to work correctly - user error?

\subsection{exciterBatchTests - WIP}
PST 4 only - used to compare all 4 exciter models linear/non-linear response to load step

Was useful in ensuring exciter models were cast to globals correctly

\subsection{inductive - WIP}
meant to verify functionality of inductive generators and loads (motors)

Multiple cases run from example script: fault example and load pulse with linear/non-linear comparison.
Works in all versions.

\subsection{tg - WIP}
Examples of a load step with and without governor action

