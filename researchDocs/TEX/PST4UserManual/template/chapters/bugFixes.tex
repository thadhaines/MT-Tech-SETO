% file to contain information on the various model fixes from version 3
%==============================================================================
\chapter{Code Fixes in PST 4}
Notable code fixes to code from PST 3 are collected in this chapter.

%=============================
\section{exc\_dc12}  
In 2015 there were `errors' corrected in the saturation block  of the DC excitation model that create differences between PST version 2 and 3 of the \verb|exc_dc12| model.
Effects are noticeable, but a solution has not been investigated.
The previous model version is included with PST 4 as \verb|exc_dc12_old.m| but was not updated to use the new global structure.

%=============================
\section{exc\_st3}  
There were two notable errors in the IEEE Type ST3 compound source rectifier exciter model \verb|exc_st3| that were corrected:
\begin{itemize}
\singlespacing
\itemsep 0 em
\item \verb|theta| index variable changed to \verb|n_bus| from \verb|n| per Ryan Elliott.
\item To use proper multiplication, the simple \verb|*| was changed to \verb|.*| in the \\ \verb|if ~isempty(nst3_sub)| section.
\end{itemize}

%=============================
\section{lmod}  
Load modulation had an error with state limiting.
If over-limit, the derivative was set to zero, but the state was not set to the maximum/minimum value correctly.
This issue has been resolved.
 
%=============================
\section{mac\_tra}  
The transient machine model had commented code that prevented the setting equal of the transient reactances.
These comments have been removed so that reactances are set equal.

%=============================
\section{rlmod}  
The same state limiting issues associated with \verb|lmod| was found in \verb|rlmod|.
The issue was corrected in the same manner as \verb|lmod|.