\documentclass[12pt]{article}
\usepackage[english]{babel}
\usepackage[utf8]{inputenc}

%% Pointer to 'default' preamble
\input{../../thad_preamble.tex}

%% Header
\rhead{Thad Haines \\ Page \thepage\ of \pageref{LastPage}}
\chead{Thoughts on how to simulate \\ bringing a generator online  }
\lhead{Research \\ 08/26/20}

\usepackage[hidelinks]{hyperref} % allow links in pdf
\usepackage{setspace}
\usepackage{multicol}
%\usepackage{minted}

\begin{document}
\onehalfspacing
\paragraph{Purpose} \ \\
An extended term case may require the insertion of new generation resources.
There is currently no known method in PST to bring more generation online.
Additionally, seemed to be minor confusion/forgetfulness as to how PST currently handles tripping a generator.
A closer look into what happens when machines are tripped off may provide some insight into a method to `un-trip', or insert, generators.


\paragraph{How generators are currently tripped in PST} \ \\
During simulation initialization, \verb|g.mac.mac_trip_flags| is set to a row vector of zeros to correspond to the \verb|mac_con| array, and 
\verb|g.mac.mac_trip_states| is set to zero (and appears unused).
To trip a generator, a \verb|mac_trip_flag| is set to one via the user generated \verb|mac_trip_logic| code.
The \verb|mac_trip_logic| is executed in the \verb|initStep| function which alters \verb|g.mac.mac_trip_flags| to account for any programmed trips.
The \verb|g.mac.mac_trip_flags| are summed in the \verb|networkSolution| (\verb|networkSoltuionVTS|).
If the sum is larger than 0.5, the line number connected to the generator in the \verb|g.line.line_sim| is found and the reactance is set to infinity (1e7).
The reduced y matrices are then recalculated and used to solve the network solution.

If derivatives of the tripped machine are not set to zero (as current VTS methods do), the generator's speed increases, mechanical power output eventually drops to zero/near-zero, while any exciter Efd appears to go to something near 1.

Realistically, Pmech and all P and Q limits should also probably be set to zero which may `clean up' values.


\pagebreak
\paragraph{Initial 'Un-trip' Thoughts} \ \\
If the trip flag is changed from 1 to zero - the reactance would return to normal, essentially reconnecting the generator to the system.
However, the calculated states and derivatives would be no longer be synchronized and probably cause all sorts of issues/transients.

The machine model may be able to be re-initialized via the use of the 0 flag and setting $i$ to the correct number of the generator to re-initialize.

\paragraph{`Un-trip' Method 1 - Alter Aggregate Generator } \ \\
This method includes altering a machine base to imitate the addition of an aggregate generator.
It would require recalculation of all \verb|mac_pot| values used in model calculations.
Additionally, the monitoring what is actually occurring may be obfuscated by the fact that any gains in capacity would be added to the existing aggregate value.
This method was not predicted as being viable.


\paragraph{`Un-trip' Method 2 - Stand alone Generator } \ \\
Start with Pref = Pmech = 0, exciter gain set to zero, and $\approx$ 0 inertia.
While inertia is essentially 0, generator will likely respond very fast to any input.
Inertia step and Pref altered.
Essentially initialize a generator with zero Pmech to the connected bus with speed the same as other generators in the area/system...


\end{document}
